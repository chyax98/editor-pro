# Editor Pro: AI-Native Architecture & Agent Guide

> æœ¬æ–‡æ¡£æè¿°äº† Editor Pro é¡¹ç›®çš„æ¶æ„è®¾è®¡ã€AI åä½œæ¨¡å¼ä»¥åŠ Agent ç”Ÿæ€ç³»ç»Ÿã€‚

---

## ğŸ—ï¸ 1. é¡¹ç›®æ¶æ„ (Architecture)

Editor Pro é‡‡ç”¨ **Core-Feature-UI åˆ†å±‚** çš„æ¨¡å—åŒ–æ¶æ„ï¼Œç¡®ä¿é«˜å†…èšã€ä½è€¦åˆã€‚

```
src/
â”œâ”€â”€ core/                   # æ ¸å¿ƒåŸºç¡€å±‚
â”‚   â”œâ”€â”€ FeatureRegistry.ts  # åŠŸèƒ½æ³¨å†Œå™¨
â”‚   â””â”€â”€ index.ts            # æ ¸å¿ƒå¯¼å‡º
â”‚
â”œâ”€â”€ types/                  # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ index.ts            # ç±»å‹ä¸»å¯¼å‡º
â”‚   â”œâ”€â”€ plugin.ts           # æ’ä»¶ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ common.ts           # é€šç”¨å·¥å…·ç±»å‹
â”‚
â”œâ”€â”€ features/               # åŠŸèƒ½æ¨¡å—å±‚ï¼ˆæŒ‰åŸŸåˆ†ç±»ï¼‰
â”‚   â”œâ”€â”€ editor/             # ç¼–è¾‘å™¨æ ¸å¿ƒå¢å¼º
â”‚   â”‚   â”œâ”€â”€ keyshots.ts     # è¡Œæ“ä½œå¿«æ·é”®
â”‚   â”‚   â”œâ”€â”€ smart-toggle.ts # æ™ºèƒ½æ ¼å¼åˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ outliner.ts     # å¤§çº²ç¼–è¾‘
â”‚   â”‚   â”œâ”€â”€ typewriter-mode.ts # æ‰“å­—æœºæ¨¡å¼
â”‚   â”‚   â””â”€â”€ index.ts        # æ¨¡å—å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ input/              # è¾“å…¥å¢å¼º
â”‚   â”‚   â”œâ”€â”€ input-handler.ts # æ™ºèƒ½è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ magic-input.ts  # é­”æ³•è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ menu.ts         # æ–œæ å‘½ä»¤
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ callout/            # Callout å¢å¼º
â”‚   â”œâ”€â”€ charts/             # å›¾è¡¨æ¸²æŸ“ (ECharts, Graphviz, Vega-Lite)
â”‚   â”œâ”€â”€ templates/          # æ¨¡æ¿ç³»ç»Ÿ
â”‚   â”œâ”€â”€ navigation/         # å¯¼èˆªåŠŸèƒ½ (å…‰æ ‡è®°å¿†, æœ€è¿‘æ–‡ä»¶)
â”‚   â”œâ”€â”€ ui/                 # ç•Œé¢å¢å¼º (ä¸“æ³¨æ¨¡å¼, æµ®åŠ¨å¤§çº², çŠ¶æ€æ )
â”‚   â”œâ”€â”€ file-ops/           # æ–‡ä»¶æ“ä½œ (YAML, æ ‡ç­¾, ä¿å­˜æ¸…ç†)
â”‚   â”œâ”€â”€ tools/              # å°å·¥å…· (è„šæ³¨, è®¡ç®—, éšæœºç”Ÿæˆ)
â”‚   â”œâ”€â”€ visuals/            # å¯è§†åŒ– (è¿‡æœŸé«˜äº®, ä¿¡æ¯å›¾)
â”‚   â”œâ”€â”€ homepage/           # é¦–é¡µä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ vault-guardian/     # ç›®å½•ç»“æ„å®ˆæŠ¤
â”‚   â””â”€â”€ mcp/                # MCP Server (AI Agent æ¥å£)
â”‚
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ editor-utils.ts     # ç¼–è¾‘å™¨å·¥å…·
â”‚   â”œâ”€â”€ markdown-generators.ts # Markdown ç”Ÿæˆå™¨
â”‚   â””â”€â”€ table-generators.ts # è¡¨æ ¼ç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ views/                  # è‡ªå®šä¹‰è§†å›¾
â”‚   â”œâ”€â”€ calendar-view.tsx   # æ—¥å†è§†å›¾
â”‚   â””â”€â”€ calendar-component.tsx
â”‚
â”œâ”€â”€ main.ts                 # æ’ä»¶å…¥å£ (Bootstrapper)
â””â”€â”€ settings.ts             # è®¾ç½®ç®¡ç† (Configuration & Presets)
```

### è®¾è®¡åŸåˆ™
*   **Feature Isolation**: æ¯ä¸ª Feature éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œé€šè¿‡ `main.ts` æ³¨å†Œï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸ (`load`/`unload`)ã€‚
*   **Zero-Config Start**: é»˜è®¤é¢„è®¾ (Presets) å¿…é¡»è®© 80% çš„ç”¨æˆ·å¼€ç®±å³ç”¨ã€‚
*   **Resource Safety**: æ‰€æœ‰ Feature å¿…é¡»å®ç°èµ„æºæ¸…ç† (`cleanup`)ï¼Œç¦æ­¢å…¨å±€æ±¡æŸ“ã€‚
*   **Type Safety**: å…¨å±€ç±»å‹æ”¾ `src/types/`ï¼Œç§æœ‰ç±»å‹æ”¾ `feature/types.ts`ã€‚

---

## ğŸ“ 2. ç›®å½•åˆ†ç±»è§„èŒƒ (Directory Guidelines)

### Feature åˆ†ç±»åŸåˆ™

| åˆ†ç±» | ç›®å½• | èŒè´£ | ç¤ºä¾‹ |
|------|------|------|------|
| **ç¼–è¾‘å™¨æ ¸å¿ƒ** | `editor/` | ç›´æ¥æ“ä½œç¼–è¾‘å™¨å†…å®¹çš„åŠŸèƒ½ | keyshots, smart-toggle, outliner |
| **è¾“å…¥å¢å¼º** | `input/` | æ‹¦æˆª/å¢å¼ºç”¨æˆ·è¾“å…¥ | smart-input, slash-command |
| **Callout** | `callout/` | Callout ç›¸å…³åŠŸèƒ½ | picker, wrapper |
| **å›¾è¡¨** | `charts/` | ä»£ç å—å›¾è¡¨æ¸²æŸ“ | ECharts, Graphviz, Vega |
| **æ¨¡æ¿** | `templates/` | æ¨¡æ¿å’Œä»£ç ç‰‡æ®µ | template-modal, snippets |
| **å¯¼èˆª** | `navigation/` | å…‰æ ‡/æ–‡ä»¶å¯¼èˆª | cursor-memory, recent-files |
| **UI** | `ui/` | ç•Œé¢å¢å¼ºç»„ä»¶ | focus-mode, outline, status-bar |
| **æ–‡ä»¶æ“ä½œ** | `file-ops/` | æ–‡ä»¶å…ƒæ•°æ®ç®¡ç† | YAML, tags, save-cleaner |
| **å°å·¥å…·** | `tools/` | ç‹¬ç«‹å°åŠŸèƒ½ | footnotes, calc, random |
| **å¯è§†åŒ–** | `visuals/` | é˜…è¯»æ¨¡å¼æ¸²æŸ“ | overdue, infographic |
| **é¦–é¡µ** | `homepage/` | é¦–é¡µä»ªè¡¨æ¿ | homepage-view |
| **å®ˆæŠ¤** | `vault-guardian/` | ç›®å½•ç»“æ„å®ˆæŠ¤ | rules, health-check |
| **MCP** | `mcp/` | AI Agent æœåŠ¡ | mcp-server |

### Feature ç›®å½•ç»“æ„

æ¯ä¸ª Feature ç›®å½•åº”è¯¥åŒ…å«ï¼š

```
feature-name/
â”œâ”€â”€ index.ts           # å¿…é¡»ï¼šæ¨¡å—å¯¼å‡º
â”œâ”€â”€ types.ts           # å¯é€‰ï¼šç§æœ‰ç±»å‹å®šä¹‰
â”œâ”€â”€ [feature]-manager.ts # å¯é€‰ï¼šåŠŸèƒ½ç®¡ç†å™¨
â”œâ”€â”€ [component].ts     # åŠŸèƒ½å®ç°æ–‡ä»¶
â””â”€â”€ [component].tsx    # React ç»„ä»¶ï¼ˆå¦‚æœ‰ï¼‰
```

---

## ğŸ¤– 3. Agent åä½œä½“ç³» (Agent Ecosystem)

æœ¬é¡¹ç›®è®¾è®¡äº†ä¸“é—¨çš„ **Skill System**ï¼Œä»¥å¢å¼º AI è¾…åŠ©å¼€å‘çš„èƒ½åŠ›ã€‚

### ğŸ› ï¸ å·²é…ç½®çš„ Skills
æ‰€æœ‰ Skill å®šä¹‰åœ¨ `.agent/skills/` ç›®å½•ä¸‹ï¼š

| Skill Name | è·¯å¾„ | èƒ½åŠ›æè¿° |
|------------|------|----------|
| **Chart Generation** | `.agent/skills/chart_gen/` | ä¸“ç²¾äºç”Ÿæˆ Vegaã€EChartsã€Graphviz ç­‰å¤æ‚å›¾è¡¨ä»£ç ã€‚AI åœ¨å“åº”ç”¨æˆ·ç»˜ç”»è¯·æ±‚æ—¶åº”è°ƒç”¨æ­¤ Skillã€‚ |
| **Test Generation** | *(Planned)* | ä¸“ç²¾äºä¸ºæ–°åŠŸèƒ½ç”Ÿæˆ Jest æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿è¦†ç›–è¾¹ç•Œæ¡ä»¶ã€‚ |

### ğŸ”„ æ ‡å‡†ä½œä¸šç¨‹åº (SOP)
Agent åœ¨å‚ä¸é¡¹ç›®å¼€å‘æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆ `docs/SOP.md` å®šä¹‰çš„æµç¨‹ï¼š
1.  **ç”¨æˆ·ä¼˜å…ˆ**ï¼šæ€è€ƒåŠŸèƒ½ç—›ç‚¹ã€‚
2.  **æ–‡ä»¶è”åŠ¨**ï¼šæ”¹åŠ¨åŠŸèƒ½æ—¶åŒæ­¥æ›´æ–° Settings å’Œ Presetsã€‚
3.  **ä»£ç è´¨é‡**ï¼šç¦æ­¢é­”æ³•æ•°å­—ï¼Œç¡®ä¿èµ„æºæ¸…ç†ã€‚
4.  **ç›®å½•è§„èŒƒ**ï¼šæ–°åŠŸèƒ½æ”¾å…¥æ­£ç¡®çš„ Feature åˆ†ç±»ã€‚

---

## ğŸ—ºï¸ 4. å…³é”®æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | è¯´æ˜ | é€‚ç”¨å¯¹è±¡ |
|------|------|----------|
| **[README.md](../README.md)** | é¡¹ç›®ä¸»é¡µï¼ŒåŠŸèƒ½æ¦‚è§ˆã€‚ | æ‰€æœ‰ç”¨æˆ· |
| **[docs/USER_GUIDE.md](../docs/USER_GUIDE.md)** | è¯¦ç»†çš„ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œã€‚ | æœ€ç»ˆç”¨æˆ· |
| **[docs/SOP.md](../docs/SOP.md)** | å¼€å‘è§„èŒƒä¸æµç¨‹ã€‚ | å¼€å‘è€…/AI |
| **[.agent/skills/](../.agent/skills/)** | AI æŠ€èƒ½å®šä¹‰åº“ã€‚ | AI åŠ©æ‰‹ |

---

## ğŸ’¡ å¼€å‘å“²å­¦ (Philosophy)

Editor Pro ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒæ˜¯**å†™ä½œæµ (Flow)** çš„å®ˆæŠ¤è€…ã€‚
*   æˆ‘ä»¬ä¸æ‰“æ–­ç”¨æˆ·ã€‚
*   æˆ‘ä»¬ä¸ä»…æä¾›å·¥å…·ï¼Œæ›´æä¾›å·¥ä½œæµã€‚
*   æˆ‘ä»¬ç”¨ AI èµ‹èƒ½å†™ä½œï¼Œè€Œä¸æ˜¯æ›¿ä»£æ€è€ƒã€‚
